p8105\_hw5\_xs2330
================
Xiao Shi
November 1, 2018

Problem 1
---------

**initializing data frame and function construction**

``` r
exp_result = data_frame()

read_data = function(filepath){
  read_csv(filepath)
}
```

**Use function read\_data**

``` r
csvs = list.files("./")
exp_result = purrr::map_df(.x = csvs[1:20], read_data)
csvs = csvs[1:20] %>%
  str_replace(".csv", "")
```

First got a variable with all necessary file names, then use the function read\_data to get resulting data frame from 20 excel files. Finally, manipulate `csvs` for further use.

**tidy results**

``` r
exp_cleaned = mutate(exp_result, specimen_id = csvs) %>%
  mutate(unique_id = specimen_id) %>%
  separate(col = specimen_id, into = c("arm", "id"), sep = "_") %>%
  gather(key = week, value = score, week_1:week_8)
knitr::kable(exp_cleaned[1:10,])
```

| arm | id  | unique\_id | week    |  score|
|:----|:----|:-----------|:--------|------:|
| con | 01  | con\_01    | week\_1 |   0.20|
| con | 02  | con\_02    | week\_1 |   1.13|
| con | 03  | con\_03    | week\_1 |   1.77|
| con | 04  | con\_04    | week\_1 |   1.04|
| con | 05  | con\_05    | week\_1 |   0.47|
| con | 06  | con\_06    | week\_1 |   2.37|
| con | 07  | con\_07    | week\_1 |   0.03|
| con | 08  | con\_08    | week\_1 |  -0.08|
| con | 09  | con\_09    | week\_1 |   0.08|
| con | 10  | con\_10    | week\_1 |   2.14|
